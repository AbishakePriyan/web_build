import{useFrame as r}from"@studio-freight/hamo";import e from"@studio-freight/lenis";import t from"clsx";import{createContext as n,useEffect as o,forwardRef as l,useRef as a,useState as c,useCallback as s,useImperativeHandle as i,useContext as u}from"react";import{create as f}from"zustand";"function"==typeof SuppressedError&&SuppressedError;const p=n(null),m=f((()=>({})));function d(r,e=[],t=0){const{lenis:n,addCallback:l,removeCallback:a}=function(){const r=u(p),e=m();return null!=r?r:e}();return o((()=>{if(r&&l&&a&&n)return l(r,t),r(n),()=>{a(r)}}),[n,l,a,t,...e]),n}const b=l(((n,l)=>{var{children:u,root:f=!1,options:d={},autoRaf:b=!0,rafPriority:y=0,className:v}=n,O=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(r);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(r,n[o])&&(t[n[o]]=r[n[o]])}return t}(n,["children","root","options","autoRaf","rafPriority","className"]);const g=a(),h=a(),[k,N]=c(),j=a([]),w=s(((r,e)=>{j.current.push({callback:r,priority:e}),j.current.sort(((r,e)=>r.priority-e.priority))}),[]),C=s((r=>{j.current=j.current.filter((e=>e.callback!==r))}),[]);i(l,(()=>({wrapper:g.current,content:h.current,lenis:k})),[k]),o((()=>{const r=new e(Object.assign(Object.assign({},d),!f&&{wrapper:g.current,content:h.current}));return N(r),()=>{r.destroy(),N(void 0)}}),[f,JSON.stringify(d)]),r((r=>{b&&(null==k||k.raf(r))}),y),o((()=>{f&&k&&m.setState({lenis:k,addCallback:w,removeCallback:C})}),[f,k,w,C]);const E=s((r=>{for(let e=0;e<j.current.length;e++)j.current[e].callback(r)}),[]);o((()=>(null==k||k.on("scroll",E),()=>{null==k||k.off("scroll",E)})),[k,E]);const P=s((()=>{g.current&&(g.current.className=t(null==k?void 0:k.className,v))}),[k,v]);return o((()=>(P(),null==k||k.on("className change",P),()=>{null==k||k.off("className change",P)})),[k,P]),React.createElement(p.Provider,{value:{lenis:k,addCallback:w,removeCallback:C}},f?u:React.createElement("div",Object.assign({ref:g,className:t(null==k?void 0:k.className,v)},O),React.createElement("div",{ref:h},u)))}));export{b as Lenis,p as LenisContext,b as ReactLenis,b as default,d as useLenis};
//# sourceMappingURL=react-lenis.mjs.map
