!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Lenis=e()}(this,(function(){"use strict";function __spreadArray(t,e,i){if(i||2===arguments.length)for(var n,o=0,r=e.length;o<r;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))}function removeParentSticky(t){"sticky"===getComputedStyle(t).position&&(t.style.setProperty("position","static"),t.dataset.sticky="true"),t.offsetParent&&removeParentSticky(t.offsetParent)}function addParentSticky(t){"true"===t?.dataset?.sticky&&(t.style.removeProperty("position"),delete t.dataset.sticky),t.offsetParent&&addParentSticky(t.offsetParent)}function offsetTop(t,e=0){const i=e+t.offsetTop;return t.offsetParent?offsetTop(t.offsetParent,i):i}function offsetLeft(t,e=0){const i=e+t.offsetLeft;return t.offsetParent?offsetLeft(t.offsetParent,i):i}function scrollTop(t,e=0){const i=e+t.scrollTop;return t.offsetParent?scrollTop(t.offsetParent,i):i+window.scrollY}function scrollLeft(t,e=0){const i=e+t.scrollLeft;return t.offsetParent?scrollLeft(t.offsetParent,i):i+window.scrollX}"function"==typeof SuppressedError&&SuppressedError;class Slide{constructor(t,{align:e=["start"],ignoreSticky:i=!0,ignoreTransform:n=!1}={}){this.element=t,this.ignoreSticky=i,this.ignoreTransform=n,this.align=[e].flat(),this.rect={},this.wrapperResizeObserver=new ResizeObserver(this.onWrapperResize),this.wrapperResizeObserver.observe(document.body),this.resizeObserver=new ResizeObserver(this.onResize),this.resizeObserver.observe(this.element)}destroy(){this.wrapperResizeObserver.disconnect(),this.resizeObserver.disconnect()}setRect({top:t,left:e,width:i,height:n,element:o}){t=t??this.rect.top,e=e??this.rect.left,i=i??this.rect.width,n=n??this.rect.height,o=o??this.rect.element,t===this.rect.top&&e===this.rect.left&&i===this.rect.width&&n===this.rect.height&&o===this.rect.element||(this.rect.top=t,this.rect.y=t,this.rect.width=i,this.rect.height=n,this.rect.left=e,this.rect.x=e,this.rect.bottom=t+n,this.rect.right=e+i)}onWrapperResize=()=>{let t,e;if(this.ignoreSticky&&removeParentSticky(this.element),this.ignoreTransform)t=offsetTop(this.element),e=offsetLeft(this.element);else{const i=this.element.getBoundingClientRect();t=i.top+scrollTop(this.element),e=i.left+scrollLeft(this.element)}this.ignoreSticky&&addParentSticky(this.element),this.setRect({top:t,left:e})};onResize=([t])=>{const e=t.borderBoxSize[0].inlineSize,i=t.borderBoxSize[0].blockSize;this.setRect({width:e,height:i})}}return function(){function Snap(t,e){var i=void 0===e?{}:e,n=i.type,o=void 0===n?"mandatory":n,r=i.velocityThreshold,s=void 0===r?1:r,a=i.onSnapStart,h=i.onSnapComplete,l=this;this.onWindowResize=function(){l.viewport.width=window.innerWidth,l.viewport.height=window.innerHeight},this.onScroll=function(t,e){var i=t.scroll,n=t.limit,o=t.lastVelocity,r=t.velocity;t.isScrolling,t.isTouching;var s=e.userData;e.isSmooth;var a=e.type;console.log(i,r,a);var h=Math.abs(o)>Math.abs(r),c=Math.sign(o)!==Math.sign(r)&&0!==r;if(Math.abs(r)<l.velocityThreshold&&h&&!c&&"snap"!==(null==s?void 0:s.initiator)){i=Math.ceil(i);var f=__spreadArray(__spreadArray([0],l.snaps.values(),!0),[n],!1);l.elements.forEach((function(t){var e,i=t.rect;t.align.forEach((function(t){"start"===t?e=i.top:"center"===t?e=i.top+i.height/2-l.viewport.height/2:"end"===t&&(e=i.top+i.height-l.viewport.height),void 0!==e&&f.push(Math.ceil(e))}))}));var p=(f=f.sort((function(t,e){return Math.abs(t)-Math.abs(e)}))).findLast((function(t){return t<=i}));void 0===p&&(p=f[0]);var d=Math.abs(i-p),u=f.find((function(t){return t>=i}));void 0===u&&(u=f[f.length-1]);var v=d<Math.abs(i-u)?p:u,y=Math.abs(i-v);("mandatory"===l.type||"proximity"===l.type&&y<=l.viewport.height/2)&&l.lenis.scrollTo(v,{userData:{initiator:"snap"},onStart:function(){var t;null===(t=l.onSnapStart)||void 0===t||t.call(l,v)},onComplete:function(){var t;null===(t=l.onSnapComplete)||void 0===t||t.call(l,v)}})}},this.lenis=t,this.type=o,this.elements=new Map,this.snaps=new Map,this.velocityThreshold=s,this.onSnapStart=a,this.onSnapComplete=h,this.viewport={width:window.innerWidth,height:window.innerHeight},this.onWindowResize(),window.addEventListener("resize",this.onWindowResize),this.lenis.on("scroll",this.onScroll)}return Snap.prototype.destroy=function(){this.lenis.off("scroll",this.onScroll),window.removeEventListener("resize",this.onWindowResize),this.elements.forEach((function(t){return t.destroy()}))},Snap.prototype.add=function(t){var e=this,i=crypto.randomUUID();return this.snaps.set(i,t),function(){return e.remove(i)}},Snap.prototype.remove=function(t){this.elements.delete(element)},Snap.prototype.addElement=function(t,e){var i=this;void 0===e&&(e={});var n=crypto.randomUUID();return this.elements.set(n,new Slide(t,e)),function(){return i.removeElement(n)}},Snap.prototype.removeElement=function(t){this.elements.delete(t)},Snap}()}));
//# sourceMappingURL=lenis-snap.min.js.map
