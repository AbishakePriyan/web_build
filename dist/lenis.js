var t=require("tiny-emitter");function i(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var e=/*#__PURE__*/i(require("virtual-scroll"));function s(t,i){let e=t%i;return e<0&&(e+=i),e}class o{to(t,i){let{duration:e=1,easing:s=(t=>t),...o}=void 0===i?{}:i;this.target=t,this.fromKeys={...o},this.toKeys={...o},this.keys=Object.keys({...o}),this.keys.forEach(i=>{this.fromKeys[i]=t[i]}),this.duration=e,this.easing=s,this.currentTime=0,this.isRunning=!0}stop(){this.isRunning=!1}raf(t){if(!this.isRunning)return;this.currentTime=Math.min(this.currentTime+t,this.duration);const i=this.easing(this.progress);this.keys.forEach(t=>{const e=this.fromKeys[t];this.target[t]=e+(this.toKeys[t]-e)*i}),1===i&&this.stop()}get progress(){return this.currentTime/this.duration}}module.exports=class extends t.TinyEmitter{constructor(t){var i,s,r;let{duration:h=1.2,easing:n=(t=>Math.min(1,1.001-Math.pow(2,-10*t))),smooth:l=!0,mouseMultiplier:c=1,smoothTouch:a=!1,touchMultiplier:p=2,direction:d="vertical",gestureDirection:u="vertical",infinite:g=!1,wrapper:w=window,content:f=document.body}=void 0===t?{}:t;super(),this.onWindowResize=()=>{this.wrapperWidth=window.innerWidth,this.wrapperHeight=window.innerHeight},this.onWrapperResize=t=>{let[i]=t;if(i){const t=i.contentRect;this.wrapperWidth=t.width,this.wrapperHeight=t.height}},this.onContentResize=t=>{let[i]=t;if(i){const t=i.contentRect;this.contentWidth=t.width,this.contentHeight=t.height}},this.onVirtualScroll=t=>{let{deltaY:i,deltaX:e,originalEvent:s}=t;const o=!!s.composedPath().find(t=>t.hasAttribute&&t.hasAttribute("data-lenis-prevent"));if(s.ctrlKey||o)return;if(this.smooth=s.changedTouches?this.smoothTouch:this.options.smooth,this.stopped)return void s.preventDefault();if(!this.smooth)return;if(4===s.buttons)return;this.smooth&&s.preventDefault();let r=0;r="both"===this.gestureDirection?e+i:"horizontal"===this.gestureDirection?e:i,this.targetScroll-=r,this.scrollTo(this.targetScroll)},this.onScroll=t=>{this.isScrolling&&this.smooth||(this.targetScroll=this.scroll=this.lastScroll=this.wrapperNode[this.scrollProperty],this.notify())},window.lenisVersion="0.2.21",this.options={duration:h,easing:n,smooth:l,mouseMultiplier:c,smoothTouch:a,touchMultiplier:p,direction:d,gestureDirection:u,infinite:g,wrapper:w,content:f},this.duration=h,this.easing=n,this.smooth=l,this.mouseMultiplier=c,this.smoothTouch=a,this.touchMultiplier=p,this.direction=d,this.gestureDirection=u,this.infinite=g,this.wrapperNode=w,this.contentNode=f,this.wrapperNode.addEventListener("scroll",this.onScroll),this.wrapperNode===window?(this.wrapperNode.addEventListener("resize",this.onWindowResize),this.onWindowResize()):(this.wrapperHeight=this.wrapperNode.offsetHeight,this.wrapperWidth=this.wrapperNode.offsetWidth,this.wrapperObserver=new ResizeObserver(this.onWrapperResize),this.wrapperObserver.observe(this.wrapperNode)),this.contentHeight=this.contentNode.offsetHeight,this.contentWidth=this.contentNode.offsetWidth,this.contentObserver=new ResizeObserver(this.onContentResize),this.contentObserver.observe(this.contentNode),this.targetScroll=this.scroll=this.lastScroll=this.wrapperNode[this.scrollProperty],this.animate=new o;const m=(null==(i=navigator)||null==(s=i.userAgentData)?void 0:s.platform)||(null==(r=navigator)?void 0:r.platform)||"unknown";this.virtualScroll=new e.default({el:this.wrapperNode,firefoxMultiplier:50,mouseMultiplier:this.mouseMultiplier*(m.includes("Win")?.84:.4),touchMultiplier:this.touchMultiplier,passive:!1,useKeyboard:!1,useTouch:!0}),this.virtualScroll.on(this.onVirtualScroll)}get scrollProperty(){let t;return t=this.wrapperNode===window?"horizontal"===this.direction?"scrollX":"scrollY":"horizontal"===this.direction?"scrollLeft":"scrollTop",t}start(){this.stopped=!1}stop(){this.stopped=!0,this.animate.stop()}destroy(){var t;this.wrapperNode===window&&this.wrapperNode.removeEventListener("resize",this.onWindowResize),this.wrapperNode.removeEventListener("scroll",this.onScroll),this.virtualScroll.destroy(),null==(t=this.wrapperObserver)||t.disconnect(),this.contentObserver.disconnect()}get limit(){return"horizontal"===this.direction?this.contentWidth-this.wrapperWidth:this.contentHeight-this.wrapperHeight}raf(t){const i=t-(this.now||0);this.now=t,!this.stopped&&this.smooth&&(this.lastScroll=this.scroll,this.animate.raf(.001*i),this.scroll===this.targetScroll&&(this.lastScroll=this.scroll),this.isScrolling&&(this.setScroll(this.scroll),this.notify()),this.isScrolling=this.scroll!==this.targetScroll)}get velocity(){return this.scroll-this.lastScroll}setScroll(t){let i=this.infinite?s(t,this.limit):t;"horizontal"===this.direction?this.wrapperNode.scrollTo(i,0):this.wrapperNode.scrollTo(0,i)}notify(){let t=this.infinite?s(this.scroll,this.limit):this.scroll;this.emit("scroll",{scroll:t,limit:this.limit,velocity:this.velocity,direction:this.lastScroll<t?1:-1,progress:t/this.limit})}scrollTo(t,i){let e,{offset:s=0,immediate:o=!1,duration:r=this.duration,easing:h=this.easing}=void 0===i?{}:i;if(null!=t){if("number"==typeof t)e=t;else if("top"===t||"#top"===t)e=0;else if("bottom"===t)e=this.limit;else{let i;if("string"==typeof t)i=document.querySelector(t);else{if(null==t||!t.nodeType)return;i=t}if(!i)return;let s=0;if(this.wrapperNode!==window){const t=this.wrapperNode.getBoundingClientRect();s="horizontal"===this.direction?t.left:t.top}const o=i.getBoundingClientRect();e=("horizontal"===this.direction?o.left:o.top)+this.scroll-s}e+=s,this.targetScroll=this.infinite?e:Math.max(0,Math.min(e,this.limit)),!this.smooth||o?(this.scroll=this.lastScroll=this.targetScroll,this.setScroll(this.targetScroll)):this.animate.to(this,{duration:r,easing:h,scroll:this.targetScroll})}}};
//# sourceMappingURL=lenis.js.map
